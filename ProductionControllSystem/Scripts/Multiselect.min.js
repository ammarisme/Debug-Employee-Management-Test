Array.prototype.search=function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return e;return-1};var Multiselect=function(t){$(t)?(this.selector=t,this.selections=[],function(t){t.events()}(this)):console.error("ERROR: Element %s does not exist.",t)};Multiselect.prototype={open:function(t){$(t).parent().attr("data-target");this.selections||(this.selections=[]),$(this.selector+" .multiselect").toggleClass("active")},close:function(){$(this.selector+" .multiselect").removeClass("active")},events:function(){var t=this;$(document).on("click",t.selector+" .multiselect > .title",function(e){e.target.className.indexOf("close-icon")<0&&t.open()}),$(document).on("click",t.selector+" .multiselect option",function(e){var s=$(this).attr("value"),i=($(this).parent().parent().attr("data-target"),t.selections.search(s));i<0?t.selections.push(s):t.selections.splice(i,1),t.selectionStatus(),t.setSelectionsString()}),$(document).click(function(e){e.target.className.indexOf("title")<0&&e.target.className.indexOf("text")<0&&e.target.className.indexOf("-icon")<0&&(e.target.className.indexOf("selected")<0||"option"!=e.target.localName)&&t.close()})},selectionStatus:function(){var t=$(this.selector+".multiselect");this.selections.length?t.addClass("selection"):t.removeClass("selection")},clearSelections:function(){this.selections=[],this.selectionStatus(),this.setSelectionsString()},getSelections:function(){return this.selections},setSelectionsString:function(){var t=this.getSelectionsString().split(", ");$(this.selector+".multiselect > .title").attr("title",t);var e=$(this.selector+".multiselect option");if(t.length>6){var s=this.getSelectionsString().split(", ");s=s.splice(0,6),$(this.selector+".multiselect > .title > .text").text(s+" [...]")}else $(this.selector+".multiselect > .title > .text").text(t);for(n=0;n<e.length;n++)$(e[n]).removeClass("selected");for(var i=0;i<t.length;i++)for(var l=t[i],n=0;n<e.length;n++)if($(e[n]).attr("value")==l){$(e[n]).addClass("selected");break}},getSelectionsString:function(){return this.selections.length>0?this.selections.join(", "):"Select"},setSelections:function(t){t[0]?(this.selections=t,this.selectionStatus(),this.setSelectionsString()):error("ERROR: This does not look like an array.")}};